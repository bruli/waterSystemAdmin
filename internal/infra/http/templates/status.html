{% extends "layouts/base.html" %}

{% block content %}
<div class="container">
    <h2 class="text-center my-4">System Status</h2>
    {% include "partials/error_form.html" %}
    <div class="row g-4 justify-content-center">
        <!-- Bloc 1 -->
        <div class="col-12 col-sm-6 col-lg-4">
            <div class="card border-secondary shadow-sm">
                <div class="card-body text-center bg-secondary bg-opacity-25">
                    <h5 class="card-title">System started at</h5>
                    <p class="card-text text-muted">{{ status.SystemStartedAt.Format("02 Jan 2006 15:04:05") }}</p>
                </div>
            </div>
        </div>

        <!-- Bloc 2 -->
        <div class="col-12 col-sm-6 col-lg-4">
            <div class="card border-info shadow-sm">
                <div class="card-body text-center bg-primary bg-opacity-25">
                    <h5 class="card-title">Current temperature</h5>
                    <p class="card-text display-6">{{ status.Temperature|floatformat:1 }}â€¯Â°C</p>
                </div>
            </div>
        </div>

        <!-- Bloc 3 -->
        <div class="col-12 col-sm-6 col-lg-4">
            <div class="card border-warning shadow-sm">
                {% set isDay = status.IsDay %}
                {% set isRaining = status.IsRaining %}

                <div class="card-body text-center
            {% if isRaining and isDay %} bg-secondary bg-opacity-25 {% endif %}
            {% if isRaining and not isDay %} bg-dark bg-opacity-25 text-light {% endif %}
            {% if not isRaining and isDay %} bg-warning bg-opacity-25 {% endif %}
            {% if not isRaining and not isDay %} bg-primary bg-opacity-25 text-light {% endif %}
        ">
                    <h5 class="card-title">Weather</h5>

                    {% if isRaining and isDay %}
                    <span class="fs-1 text-primary">ğŸŒ§ï¸</span>
                    <p class="text-muted">Raining (Day)</p>

                    {% elif isRaining and not isDay %}
                    <span class="fs-1 text-light">ğŸŒ§ï¸</span>
                    <p class="text-light">Raining (Night)</p>

                    {% elif not isRaining and isDay %}
                    <span class="fs-1 text-warning">â˜€ï¸</span>
                    <p class="text-muted">Sunny (Day)</p>

                    {% else %}
                    <span class="fs-1 text-light">ğŸŒ™</span>
                    <p class="text-light">Clear (Night)</p>
                    {% endif %}
                </div>
            </div>
        </div>



        <!-- Bloc 4 -->
        <div class="col-12 col-sm-6 col-lg-4">
            <div class="card border-secondary shadow-sm">
                <div class="card-body text-center bg-secondary bg-opacity-25">
                    <h5 class="card-title">System updated at</h5>
                    <p class="card-text text-muted">{{ status.UpdatedAt.Format("02 Jan 2006 15:04:05") }}</p>
                </div>
            </div>
        </div>

        <!-- Bloc 5 -->
        <div class="col-12 col-sm-6 col-lg-4">
            <div class="card border-info shadow-sm">
                <div class="card-body text-center bg-primary bg-opacity-25">
                    <h5 class="card-title">Current humidity</h5>
                    <p class="card-text display-6">{{ status.Humidity|floatformat:1 }}â€¯%</p>
                </div>
            </div>
        </div>

        <!-- Bloc 6 -->
        <!-- Bloc 6 amb acciÃ³ -->
        <div class="col-12 col-sm-6 col-lg-4">
            <div class="card border-success shadow-sm">
                <div class="card-body text-center {% if status.Active %}bg-success bg-opacity-25{% else %}bg-danger bg-opacity-25{% endif %}">
                    <h5 class="card-title">Active</h5>
                    {% if status.Active %}
                    <form method="POST" action="/deactivate">
                        <button class="btn btn-outline-danger" type="submit">ğŸŸ¢ System ON â€“ Click to turn OFF</button>
                    </form>
                    {% else %}
                    <form method="POST" action="/activate">
                        <button class="btn btn-outline-danger" type="submit">ğŸ”´ System OFF â€“ Click to turn ON</button>
                    </form>
                    {% endif %}
                </div>
            </div>
        </div>


    </div>

    <!-- BotÃ³ de refresc -->
    <div class="d-flex justify-content-center mt-4">
        <a href="/update-status" class="btn btn-primary btn-lg shadow w-100 w-md-auto">ğŸ”„ Update</a>
    </div>
</div>

{% endblock %}
